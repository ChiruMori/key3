/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

$().ready(function(){function r(t,e,l,a,i){var n=void 0!==i,s=n&&0<i?"text-danger":"text-success";return i=0<i?"+"+i:i+"",'<li class="list-group-item d-flex align-items-center">\n    <div class="img-profile mr-3">\n        <img class="w-100 rounded-circle"\n             src="'+t+'"\n             alt="头像而已">\n        <div class="status-indicator"></div>\n    </div>\n    <div class="w-100'+(n?"pr-rem-5":"")+'">\n        <div class="text-truncate">'+e+'</div>\n        <div class="small text-gray-500">'+l+" · "+utils.whenIs(a)+"</div>\n    </div>\n"+(n?'<p class="bill font-weight-bold '+s+'">'+i+"</p>\n":"")+"</li>"}utils.subscribeEvent(CONST_VAL.clubChangedEventKey,function(s){utils.showLoading(),utils.ajax("/admin/api/dashboard/"+s.id,{},"GET",function(t){let e=t.data;$("#pageTitle").text(s.name),$("#enrollNumber").text(e.enrollMembers),$("#activeMembers").text(e.activeMembers),$("#activeBar").attr("style","width: "+e.activeMembers/e.enrollMembers*100+"%"),$("#enableAssets").text(e.assets),$("#roomUsage").text(e.usage.toFixed(2)+"%"),$("#usageBar").attr("style","width: "+e.usage+"%");let l=$("#logArea");l.html("");let a=$("#allLogATag");0!==e.logs.content.length?(e.logs.content.forEach(function(t){l.append($(r(t.showHead,t.content,t.who,t.createTime)))}),a.text("全部日志"),a.attr("href",utils.wrapUrlWithToken("/key3/admin/page/system-log"))):(a.text("什么都没有..."),a.attr("href","#"));let i=$("#billArea");i.html("");let n=$("#allBillATag");0!==e.bills.content.length?(e.bills.content.forEach(function(t){i.append($(r(t.showHead,t.info,t.who,t.createTime,t.cost)))}),n.text("全部收支"),n.attr("href",utils.wrapUrlWithToken("/key3/admin/page/club-bill"))):(n.text("什么都没有..."),n.attr("href","#"))},function(t){utils.error("加载失败","当前社团已被删除或者网络连接错误"),console.error(t)},function(){utils.hideLoading()})})});